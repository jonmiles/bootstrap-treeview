!function(a,b,c,d){"use strict";var e="treeview",f={};f.settings={injectStyle:!0,levels:2,expandIcon:"glyphicon glyphicon-plus",collapseIcon:"glyphicon glyphicon-minus",emptyIcon:"glyphicon",nodeIcon:"",selectedIcon:"",checkedIcon:"glyphicon glyphicon-check",uncheckedIcon:"glyphicon glyphicon-unchecked",color:d,backColor:d,borderColor:d,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:d,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:d,onNodeCollapsed:d,onNodeDisabled:d,onNodeEnabled:d,onNodeExpanded:d,onNodeSelected:d,onNodeUnchecked:d,onNodeUnselected:d,onSearchComplete:d,onSearchCleared:d},f.options={silent:!1,ignoreChildren:!1},f.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};var g=function(b,c){return this.$element=a(b),this._elementId=b.id,this._styleId=this._elementId+"-style",this._init(c),{options:this._options,init:a.proxy(this._init,this),remove:a.proxy(this._remove,this),getNode:a.proxy(this.getNode,this),getParent:a.proxy(this.getParent,this),getSiblings:a.proxy(this.getSiblings,this),getSelected:a.proxy(this.getSelected,this),getUnselected:a.proxy(this.getUnselected,this),getExpanded:a.proxy(this.getExpanded,this),getCollapsed:a.proxy(this.getCollapsed,this),getChecked:a.proxy(this.getChecked,this),getUnchecked:a.proxy(this.getUnchecked,this),getDisabled:a.proxy(this.getDisabled,this),getEnabled:a.proxy(this.getEnabled,this),selectNode:a.proxy(this.selectNode,this),unselectNode:a.proxy(this.unselectNode,this),toggleNodeSelected:a.proxy(this.toggleNodeSelected,this),collapseAll:a.proxy(this.collapseAll,this),collapseNode:a.proxy(this.collapseNode,this),expandAll:a.proxy(this.expandAll,this),expandNode:a.proxy(this.expandNode,this),toggleNodeExpanded:a.proxy(this.toggleNodeExpanded,this),revealNode:a.proxy(this.revealNode,this),checkAll:a.proxy(this.checkAll,this),checkNode:a.proxy(this.checkNode,this),uncheckAll:a.proxy(this.uncheckAll,this),uncheckNode:a.proxy(this.uncheckNode,this),toggleNodeChecked:a.proxy(this.toggleNodeChecked,this),disableAll:a.proxy(this.disableAll,this),disableNode:a.proxy(this.disableNode,this),enableAll:a.proxy(this.enableAll,this),enableNode:a.proxy(this.enableNode,this),toggleNodeDisabled:a.proxy(this.toggleNodeDisabled,this),search:a.proxy(this.search,this),clearSearch:a.proxy(this.clearSearch,this)}};g.prototype._init=function(b){this._tree=[],this._nodes=[],this._initialized=!1,b.data&&("string"==typeof b.data&&(b.data=a.parseJSON(b.data)),this._tree=a.extend(!0,[],b.data),delete b.data),this._options=a.extend({},f.settings,b),this._destroy(),this._subscribeEvents(),this._setInitialStates({nodes:this._tree},0),this._render()},g.prototype._remove=function(){this._destroy(),a.removeData(this,e),a("#"+this._styleId).remove()},g.prototype._destroy=function(){this._initialized&&(this.$wrapper.remove(),this.$wrapper=null,this._unsubscribeEvents(),this._initialized=!1)},g.prototype._unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},g.prototype._subscribeEvents=function(){this._unsubscribeEvents(),this.$element.on("click",a.proxy(this._clickHandler,this)),"function"==typeof this._options.onNodeChecked&&this.$element.on("nodeChecked",this._options.onNodeChecked),"function"==typeof this._options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this._options.onNodeCollapsed),"function"==typeof this._options.onNodeDisabled&&this.$element.on("nodeDisabled",this._options.onNodeDisabled),"function"==typeof this._options.onNodeEnabled&&this.$element.on("nodeEnabled",this._options.onNodeEnabled),"function"==typeof this._options.onNodeExpanded&&this.$element.on("nodeExpanded",this._options.onNodeExpanded),"function"==typeof this._options.onNodeSelected&&this.$element.on("nodeSelected",this._options.onNodeSelected),"function"==typeof this._options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this._options.onNodeUnchecked),"function"==typeof this._options.onNodeUnselected&&this.$element.on("nodeUnselected",this._options.onNodeUnselected),"function"==typeof this._options.onSearchComplete&&this.$element.on("searchComplete",this._options.onSearchComplete),"function"==typeof this._options.onSearchCleared&&this.$element.on("searchCleared",this._options.onSearchCleared)},g.prototype._setInitialStates=function(b,c){if(b.nodes){c+=1;var d=b,e=this;a.each(b.nodes,function(a,b){b.nodeId=e._nodes.length,b.parentId=d.nodeId,b.hasOwnProperty("selectable")||(b.selectable=!0),b.state=b.state||{},b.state.hasOwnProperty("checked")||(b.state.checked=!1),b.state.hasOwnProperty("disabled")||(b.state.disabled=!1),b.state.hasOwnProperty("expanded")||(b.state.expanded=!b.state.disabled&&c<e._options.levels&&b.nodes&&b.nodes.length>0?!0:!1),b.state.visible=c>e._options.levels?!1:!0,b.state.hasOwnProperty("selected")||(b.state.selected=!1),e._nodes.push(b),b.nodes&&e._setInitialStates(b,c)})}},g.prototype._clickHandler=function(b){this._options.enableLinks||b.preventDefault();var c=a(b.target),d=this.targetNode(c);if(d&&!d.state.disabled){var e=c.attr("class")?c.attr("class").split(" "):[];-1!==e.indexOf("expand-icon")?this._toggleExpanded(d,f.options):-1!==e.indexOf("check-icon")?this._toggleChecked(d,f.options):d.selectable?this._toggleSelected(d,f.options):this._toggleExpanded(d,f.options)}},g.prototype.targetNode=function(a){var b=a.closest("li.list-group-item").attr("data-nodeid"),c=this._nodes[b];return c||console.log("Error: node does not exist"),c},g.prototype._toggleExpanded=function(a,b){a&&this._setExpanded(a,!a.state.expanded,b)},g.prototype._setExpanded=function(b,c,d){d&&c===b.state.expanded||(c&&b.nodes?(b.state.expanded=!0,b.$el&&b.$el.children("span.expand-icon").removeClass(this._options.expandIcon).addClass(this._options.collapseIcon),b.nodes&&d&&a.each(b.nodes,a.proxy(function(a,b){this._setVisible(b,!0,d)},this)),d&&!d.silent&&this.$element.trigger("nodeExpanded",a.extend(!0,{},b))):c||(b.state.expanded=!1,b.$el&&b.$el.children("span.expand-icon").removeClass(this._options.collapseIcon).addClass(this._options.expandIcon),b.nodes&&d&&a.each(b.nodes,a.proxy(function(a,b){this._setVisible(b,!1,d),this._setExpanded(b,!1,d)},this)),d&&!d.silent&&this.$element.trigger("nodeCollapsed",a.extend(!0,{},b))))},g.prototype._setVisible=function(a,b,c){c&&b===a.state.visible||(b?(a.state.visible=!0,a.$el&&a.$el.removeClass("node-hidden")):(a.state.visible=!1,a.$el&&a.$el.addClass("node-hidden")))},g.prototype._toggleSelected=function(a,b){return a?(this._setSelected(a,!a.state.selected,b),this):void 0},g.prototype._setSelected=function(b,c,d){return d&&c===b.state.selected?void 0:(c?(this._options.multiSelect||a.each(this._findNodes("true","g","state.selected"),a.proxy(function(a,b){this._setSelected(b,!1,d)},this)),b.state.selected=!0,b.$el&&(b.$el.addClass("node-selected"),(b.selectedIcon||this._options.selectedIcon)&&b.$el.children("span.node-icon").removeClass(b.icon||this._options.nodeIcon).addClass(b.selectedIcon||this._options.selectedIcon)),d&&!d.silent&&this.$element.trigger("nodeSelected",a.extend(!0,{},b))):(b.state.selected=!1,b.$el&&(b.$el.removeClass("node-selected"),(b.selectedIcon||this._options.selectedIcon)&&b.$el.children("span.node-icon").removeClass(b.selectedIcon||this._options.selectedIcon).addClass(b.icon||this._options.nodeIcon)),d&&!d.silent&&this.$element.trigger("nodeUnselected",a.extend(!0,{},b))),this)},g.prototype._toggleChecked=function(a,b){a&&this._setChecked(a,!a.state.checked,b)},g.prototype._setChecked=function(b,c,d){d&&c===b.state.checked||(c?(b.state.checked=!0,b.$el&&(b.$el.addClass("node-checked"),b.$el.children("span.check-icon").removeClass(this._options.uncheckedIcon).addClass(this._options.checkedIcon)),d&&!d.silent&&this.$element.trigger("nodeChecked",a.extend(!0,{},b))):(b.state.checked=!1,b.$el&&(b.$el.removeClass("node-checked"),b.$el.children("span.check-icon").removeClass(this._options.checkedIcon).addClass(this._options.uncheckedIcon)),d&&!d.silent&&this.$element.trigger("nodeUnchecked",a.extend(!0,{},b))))},g.prototype._setDisabled=function(b,c,d){d&&c===b.state.disabled||(c?(b.state.disabled=!0,this._setSelected(b,!1,d),this._setChecked(b,!1,d),this._setExpanded(b,!1,d),b.$el&&b.$el.addClass("node-disabled"),d&&!d.silent&&this.$element.trigger("nodeDisabled",a.extend(!0,{},b))):(b.state.disabled=!1,b.$el&&b.$el.removeClass("node-disabled"),d&&!d.silent&&this.$element.trigger("nodeEnabled",a.extend(!0,{},b))))},g.prototype._setSearchResult=function(a,b,c){c&&b===a.searchResult||(b?(a.searchResult=!0,a.$el&&a.$el.addClass("node-result")):(a.searchResult=!1,a.$el&&a.$el.removeClass("node-result")))},g.prototype._render=function(){this._initialized||(this.$wrapper=a(this._template.tree),this.$element.empty().addClass(e).append(this.$wrapper),this._injectStyle(),this._initialized=!0),this._tree&&a.each(this._tree,a.proxy(function(a,b){b.level=1,this._renderNode(b)},this))},g.prototype._renderNode=function(b,c){if(b){b.$el?b.$el.empty():(b.$el=this._newNodeEl(c),b.$el.addClass("node-"+this._elementId).attr("data-nodeid",b.nodeId));for(var d=0;d<b.level-1;d++)b.$el.append(this._template.indent);b.$el.append(a(this._template.icon).addClass(b.nodes?"expand-icon":this._options.emptyIcon)),this._options.showIcon&&b.$el.append(a(this._template.icon).addClass("node-icon").addClass(b.icon||this._options.nodeIcon)),this._options.showCheckbox&&b.$el.append(a(this._template.icon).addClass("check-icon")),b.$el.append(this._options.enableLinks?a(this._template.link).attr("href",b.href).append(b.text):b.text),this._options.showTags&&b.tags&&a.each(b.tags,a.proxy(function(c,d){b.$el.append(a(this._template.badge).append(d))},this)),this._setSelected(b,b.state.selected),this._setChecked(b,b.state.checked),this._setSearchResult(b,b.searchResult),this._setExpanded(b,b.state.expanded),this._setDisabled(b,b.state.disabled),this._setVisible(b,b.state.visible),b.nodes&&a.each(b.nodes.slice(0).reverse(),a.proxy(function(a,c){c.level=b.level+1,this._renderNode(c,b.$el)},this))}},g.prototype._newNodeEl=function(b){var c=a(this._template.node);return b?this.$wrapper.children().eq(b.index()).after(c):this.$wrapper.append(c),c},g.prototype._expandNode=function(b){if(b.nodes){var c=b.$el;a.each(b.nodes.slice(0).reverse(),a.proxy(function(a,d){d.level=b.level+1,this._renderNode(d,c)},this))}},g.prototype._injectStyle=function(){this._options.injectStyle&&!c.getElementById(this._styleId)&&a('<style type="text/css" id="'+this._styleId+'"> '+this._buildStyle()+" </style>").appendTo("head")},g.prototype._buildStyle=function(){var b=".node-"+this._elementId+"{";if(this._options.color&&(b+="color:"+this._options.color+";"),this._options.backColor&&(b+="background-color:"+this._options.backColor+";"),this._options.showBorder?this._options.borderColor&&(b+="border:1px solid "+this._options.borderColor+";"):b+="border:none;",b+="}",this._options.onhoverColor&&(b+=".node-"+this._elementId+":not(.node-disabled):hover{background-color:"+this._options.onhoverColor+";}"),this._options.highlightSearchResults&&(this._options.searchResultColor||this._options.searchResultBackColor)){var c="";this._options.searchResultColor&&(c+="color:"+this._options.searchResultColor+";"),this._options.searchResultBackColor&&(c+="background-color:"+this._options.searchResultBackColor+";"),b+=".node-"+this._elementId+".node-result{"+c+"}",b+=".node-"+this._elementId+".node-result:hover{"+c+"}"}if(this._options.highlightSelected&&(this._options.selectedColor||this._options.selectedBackColor)){var c="";this._options.selectedColor&&(c+="color:"+this._options.selectedColor+";"),this._options.selectedBackColor&&(c+="background-color:"+this._options.selectedBackColor+";"),b+=".node-"+this._elementId+".node-selected{"+c+"}",b+=".node-"+this._elementId+".node-selected:hover{"+c+"}"}return a.each(this._nodes,a.proxy(function(a,c){if(c.color||c.backColor){var d="";c.color&&(d+="color:"+c.color+";"),c.backColor&&(d+="background-color:"+c.backColor+";"),b+=".node-"+this._elementId+'[data-nodeid="'+c.nodeId+'"]{'+d+"}"}},this)),this._css+b},g.prototype._template={tree:'<ul class="list-group"></ul>',node:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},g.prototype._css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",g.prototype.getNode=function(a){return this._nodes[a]},g.prototype.getParent=function(a){var b=this._identifyNode(a);return this._nodes[b.parentId]},g.prototype.getSiblings=function(a){var b=this._identifyNode(a),c=this.getParent(b),d=c?c.nodes:this._tree;return d.filter(function(a){return a.nodeId!==b.nodeId})},g.prototype.getSelected=function(){return this._findNodes("true","g","state.selected")},g.prototype.getUnselected=function(){return this._findNodes("false","g","state.selected")},g.prototype.getExpanded=function(){return this._findNodes("true","g","state.expanded")},g.prototype.getCollapsed=function(){return this._findNodes("false","g","state.expanded")},g.prototype.getChecked=function(){return this._findNodes("true","g","state.checked")},g.prototype.getUnchecked=function(){return this._findNodes("false","g","state.checked")},g.prototype.getDisabled=function(){return this._findNodes("true","g","state.disabled")},g.prototype.getEnabled=function(){return this._findNodes("false","g","state.disabled")},g.prototype.selectNode=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._setSelected(a,!0,b)},this))},g.prototype.unselectNode=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._setSelected(a,!1,b)},this))},g.prototype.toggleNodeSelected=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._toggleSelected(a,b)},this))},g.prototype.collapseAll=function(b){b=a.extend({},f.options,b),b.levels=b.levels||999,this.collapseNode(this._tree,b)},g.prototype.collapseNode=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._setExpanded(a,!1,b)},this))},g.prototype.expandAll=function(b){b=a.extend({},f.options,b),b.levels=b.levels||999,this.expandNode(this._tree,b)},g.prototype.expandNode=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._setExpanded(a,!0,b),a.nodes&&this._expandLevels(a.nodes,b.levels-1,b)},this))},g.prototype._expandLevels=function(b,c,d){a.each(b,a.proxy(function(a,b){this._setExpanded(b,c>0?!0:!1,d),b.nodes&&this._expandLevels(b.nodes,c-1,d)},this))},g.prototype.revealNode=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){for(var c,d=a;c=this.getParent(d);)d=c,this._setExpanded(d,!0,b)},this))},g.prototype.toggleNodeExpanded=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._toggleExpanded(a,b)},this))},g.prototype.checkAll=function(b){var c=this._findNodes("false","g","state.checked");this._forEachIdentifier(c,b,a.proxy(function(a,b){this._setChecked(a,!0,b)},this))},g.prototype.checkNode=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._setChecked(a,!0,b)},this))},g.prototype.uncheckAll=function(b){var c=this._findNodes("true","g","state.checked");this._forEachIdentifier(c,b,a.proxy(function(a,b){this._setChecked(a,!1,b)},this))},g.prototype.uncheckNode=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._setChecked(a,!1,b)},this))},g.prototype.toggleNodeChecked=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._toggleChecked(a,b)},this))},g.prototype.disableAll=function(b){var c=this._findNodes("false","g","state.disabled");this._forEachIdentifier(c,b,a.proxy(function(a,b){this._setDisabled(a,!0,b)},this))},g.prototype.disableNode=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._setDisabled(a,!0,b)},this))},g.prototype.enableAll=function(b){var c=this._findNodes("true","g","state.disabled");this._forEachIdentifier(c,b,a.proxy(function(a,b){this._setDisabled(a,!1,b)},this))},g.prototype.enableNode=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._setDisabled(a,!1,b)},this))},g.prototype.toggleNodeDisabled=function(b,c){this._forEachIdentifier(b,c,a.proxy(function(a,b){this._setDisabled(a,!a.state.disabled,b)},this))},g.prototype._forEachIdentifier=function(b,c,d){c=a.extend({},f.options,c),b instanceof Array||(b=[b]),a.each(b,a.proxy(function(a,b){d(this._identifyNode(b),c)},this))},g.prototype._identifyNode=function(a){return"number"==typeof a?this._nodes[a]:a},g.prototype.search=function(b,c){c=a.extend({},f.searchOptions,c);var d=this._getSearchResults(),e=[];if(b&&b.length>0){c.exactMatch&&(b="^"+b+"$");var g="g";c.ignoreCase&&(g+="i"),e=this._findNodes(b,g)}return a.each(this._diffArray(e,d),a.proxy(function(a,b){this._setSearchResult(b,!1,c)},this)),a.each(this._diffArray(d,e),a.proxy(function(a,b){this._setSearchResult(b,!0,c)},this)),e&&c.revealResults&&this.revealNode(e),this.$element.trigger("searchComplete",a.extend(!0,{},e)),e},g.prototype.clearSearch=function(b){b=a.extend({},{render:!0},b);var c=a.each(this._getSearchResults(),a.proxy(function(a,c){this._setSearchResult(c,!1,b)},this));this.$element.trigger("searchCleared",a.extend(!0,{},c))},g.prototype._getSearchResults=function(){return this._findNodes("true","g","searchResult")},g.prototype._diffArray=function(b,c){var d=[];return a.grep(c,function(c){-1===a.inArray(c,b)&&d.push(c)}),d},g.prototype._findNodes=function(b,c,d){return c=c||"g",d=d||"text",a.grep(this._nodes,a.proxy(function(a){var e=this._getNodeValue(a,d);return"string"==typeof e?e.match(new RegExp(b,c)):void 0},this))},g.prototype._getNodeValue=function(a,b){var c=b.indexOf(".");if(c>0){var e=a[b.substring(0,c)],f=b.substring(c+1,b.length);return this._getNodeValue(e,f)}return a.hasOwnProperty(b)?a[b].toString():d};var h=function(a){b.console&&b.console.error(a)};a.fn[e]=function(b,c){var d;return this.each(function(){var f=a.data(this,e);"string"==typeof b?f?a.isFunction(f[b])&&"_"!==b.charAt(0)?(c instanceof Array||(c=[c]),d=f[b].apply(f,c)):h("No such method : "+b):h("Not initialized, can not call method : "+b):"boolean"==typeof b?d=f:a.data(this,e,new g(this,a.extend(!0,{},b)))}),d||this}}(jQuery,window,document);